(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{8746:(e,t,s)=>{Promise.resolve().then(s.bind(s,5473))},5473:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>em});var a=s(5155),r=s(2115),o=s(5007),n=s(4085),l=s(241),i=s(9196),d=s(7782),c=s(767),u=s(9602);let m=d.bL,x=d.l9,h=d.ZL;d.bm;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.hJ,{ref:t,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});f.displayName=d.hJ.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(d.UC,{ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=d.UC.displayName;let g=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};g.displayName="DialogHeader";let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.hE,{ref:t,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});v.displayName=d.hE.displayName;let b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.VY,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",s),...r})});b.displayName=d.VY.displayName;var N=s(3518),j=s(6967),y=s(481);function w(e){let{className:t,classNames:s,showOutsideDays:r=!0,...o}=e;return(0,a.jsx)(y.hv,{showOutsideDays:r,className:(0,u.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,u.cn)((0,n.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,u.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===o.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,u.cn)((0,n.r)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:()=>(0,a.jsx)(N.A,{className:"h-4 w-4"}),IconRight:()=>(0,a.jsx)(j.A,{className:"h-4 w-4"})},...o})}w.displayName="Calendar";var k=s(434);let S=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:o=!0,...n}=e;return(0,a.jsx)(k.b,{ref:t,decorative:o,orientation:r,className:(0,u.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...n})});S.displayName=k.b.displayName;var A=s(1868);let _=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(A.bL,{ref:t,className:(0,u.cn)("relative overflow-hidden",s),...o,children:[(0,a.jsx)(A.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(C,{}),(0,a.jsx)(A.OK,{})]})});_.displayName=A.bL.displayName;let C=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...o}=e;return(0,a.jsx)(A.VM,{ref:t,orientation:r,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...o,children:(0,a.jsx)(A.lr,{className:"relative flex-1 rounded-full bg-border"})})});C.displayName=A.VM.displayName;var T=s(652);let R=(0,T.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function E(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,u.cn)(R({variant:s}),t),...r})}var O=s(7053),I=s(2929),B=s(6423),D=s(5236),P=s(1466),z=s(8617),L=s(9561),V=s(7223),U=s(1594),M=s(6744),F=s(1773),J=s(6889),Z=s(4854),$=s(8317),G=s(1719),H=s(1902),K=s(8867);let W=$.bL;$.YJ;let Y=$.WT,q=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)($.l9,{ref:t,className:(0,u.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[r,(0,a.jsx)($.In,{asChild:!0,children:(0,a.jsx)(G.A,{className:"h-4 w-4 opacity-50"})})]})});q.displayName=$.l9.displayName;let X=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)($.PP,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})});X.displayName=$.PP.displayName;let Q=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)($.wn,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(G.A,{className:"h-4 w-4"})})});Q.displayName=$.wn.displayName;let ee=r.forwardRef((e,t)=>{let{className:s,children:r,position:o="popper",...n}=e;return(0,a.jsx)($.ZL,{children:(0,a.jsxs)($.UC,{ref:t,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,...n,children:[(0,a.jsx)(X,{}),(0,a.jsx)($.LM,{className:(0,u.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(Q,{})]})})});ee.displayName=$.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)($.JU,{ref:t,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",s),...r})}).displayName=$.JU.displayName;let et=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)($.q7,{ref:t,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)($.VF,{children:(0,a.jsx)(K.A,{className:"h-4 w-4"})})}),(0,a.jsx)($.p4,{children:r})]})});et.displayName=$.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)($.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=$.wv.displayName;var es=s(9710);let ea=es.Kq,er=es.bL,eo=es.l9,en=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...o}=e;return(0,a.jsx)(es.ZL,{children:(0,a.jsx)(es.UC,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})})});en.displayName=es.UC.displayName;let el=(0,T.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ei=r.forwardRef((e,t)=>{let{className:s,variant:r,...o}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,u.cn)(el({variant:r}),s),...o})});ei.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,u.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let ed=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("text-sm [&_p]:leading-relaxed",s),...r})});ed.displayName="AlertDescription";var ec=s(7396),eu=s(1319);function em(){var e,t;let[s,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(new Date),[h,f]=(0,r.useState)("09:00"),[N,j]=(0,r.useState)("1"),[y,k]=(0,r.useState)(!0),[A,C]=(0,r.useState)("Connecting..."),{user:T,logout:R}=(0,i.A)(),{toast:$}=(0,l.dj)(),[G,H]=(0,r.useState)(null);(0,r.useEffect)(()=>{K(),console.log(G);let e=(0,eu.io)("https://iot-server.mukarramah.in",{withCredentials:!0});return e.on("connect",()=>{C("Connected"),$({title:"Connected",description:"Successfully connected to parking system"})}),e.on("INITIAL_STATE",e=>{K(),e.slots&&d(Object.values(e.slots))}),e.on("PARKING_UPDATE",e=>{K(),e.slots&&d(Object.values(e.slots))}),e.on("PARKING_ERROR",e=>{K(),$({variant:"destructive",title:"Parking Error",description:e.message})}),e.on("SENSOR_DATA",e=>{K(),console.log("Received sensor data:",e)}),e.on("SERVO_STATUS",e=>{K(),$({title:"Gate Status",description:"Gate ".concat(e.command)})}),e.on("disconnect",()=>{K(),C("Disconnected"),$({variant:"destructive",title:"Disconnected",description:"Lost connection to parking system"})}),e.on("connect_error",e=>{K(),C("Connection Error"),console.error("Socket.IO Error:",e),$({variant:"destructive",title:"Connection Error",description:"Failed to connect to parking system"})}),()=>{e.disconnect()}},[]);let K=async()=>{try{k(!0);let e=await fetch("".concat("https://iot-server.mukarramah.in","/api/slots"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=await e.json();"success"===t.status&&d(t.data.slots)}catch(e){console.error("Error fetching slots:",e),$({variant:"destructive",title:"Error",description:"Failed to fetch parking slots"})}finally{k(!1)}},X=async e=>{if(c)try{let[t,r]=h.split(":"),o=new Date(c);o.setHours(parseInt(t),parseInt(r),0);let n=new Date(o);n.setHours(o.getHours()+parseInt(N));let l=await fetch("".concat("https://iot-server.mukarramah.in","/api/slots/book"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({slotNumber:e,bookingStart:o.toISOString(),bookingEnd:n.toISOString()})}),i=await l.json();"success"===i.status?($({title:"Success",description:"Slot booked successfully"}),K()):$({variant:"destructive",title:"Error",description:(0,a.jsxs)(a.Fragment,{children:[i.message,". Try"," ",(0,a.jsx)(ec.default,{href:"#",className:"underline",onClick:()=>{var e;let t=null===(e=s.find(e=>{var t;return(null===(t=e.bookedBy)||void 0===t?void 0:t._id)===(null==T?void 0:T._id)}))||void 0===e?void 0:e.slotNumber;t&&Q(t)},children:"Release Slot"})]})})}catch(e){$({variant:"destructive",title:"Error",description:"Failed to book slot"})}},Q=async e=>{try{let t=await fetch("".concat("https://iot-server.mukarramah.in","/api/slots/release"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({slotNumber:e})}),s=await t.json();"success"===s.status&&$({title:"Success",description:"Slot released successfully"}),K()}catch(t){$({variant:"destructive",title:"Error",description:(0,a.jsxs)(a.Fragment,{children:["Failed to release slot. Try"," ",(0,a.jsx)(ec.default,{href:"#",className:"underline",onClick:()=>Q(e),children:"releasing again"})]})})}},es=e=>{switch(e){case"available":return(0,a.jsx)(O.A,{className:"h-16 w-16 text-green-500 animate-pulse"});case"occupied":return(0,a.jsx)(I.A,{className:"h-16 w-16 text-blue-500 animate-bounce"});case"parked":return(0,a.jsxs)("div",{className:"relative w-32 h-32 group perspective-1000",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl shadow-lg transform transition-all duration-300 group-hover:shadow-2xl"}),(0,a.jsx)("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 z-10",children:(0,a.jsxs)("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-full shadow-lg border-2 border-white flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Parked"})]})}),(0,a.jsx)("div",{className:"absolute inset-2 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.A,{className:"h-20 w-20 text-blue-600 drop-shadow-lg transform transition-all duration-300 group-hover:scale-105"}),(0,a.jsx)("div",{className:"absolute -bottom-2 inset-x-0 h-4 bg-black/10 blur-sm rounded-full transform scale-75"})]})}),(0,a.jsx)("div",{className:"absolute bottom-3 inset-x-4",children:(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("div",{className:"h-1 w-8 bg-yellow-400 rounded-full shadow-sm"}),(0,a.jsx)("div",{className:"h-1 w-8 bg-yellow-400 rounded-full shadow-sm"})]})}),(0,a.jsx)("div",{className:"absolute inset-0 border-2 border-blue-200 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-8 bg-gradient-to-t from-slate-200/50 to-transparent rounded-b-xl"})]});default:return(0,a.jsx)(O.A,{className:"h-16 w-16"})}};return(0,a.jsx)("div",{className:"container mx-auto p-8",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage your parking reservations and view available slots"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"mr-2 px-3 py-1 rounded-full text-sm font-semibold \n                ".concat("Connected"===A?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),children:A})})]}),(0,a.jsx)(ea,{children:(0,a.jsxs)(er,{children:[(0,a.jsx)(eo,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",onClick:R,children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4 text-red-700 ".concat(y?"animate-spin":"")}),"Logout"]})}),(0,a.jsx)(en,{children:(0,a.jsx)("p",{children:"Logout from Smart Parking System"})})]})})]}),(0,a.jsx)(S,{className:"my-6"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(o.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow duration-300",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"text-2xl flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-6 w-6"}),"Your Profile"]})}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Username:"}),(0,a.jsx)("span",{className:"font-medium",children:null==T?void 0:T.username})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Vehicle:"}),(0,a.jsxs)(E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,a.jsx)(O.A,{className:"h-3 w-3"}),null==T?void 0:T.vehicleNumber]})]}),(0,a.jsxs)(ei,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),(0,a.jsx)(ed,{children:"Keep your vehicle information up to date for seamless parking management"})]})]})]}),(0,a.jsxs)(o.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow duration-300",children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"text-2xl flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-6 w-6"}),"Current Booking"]})}),(0,a.jsx)(o.Wu,{className:"space-y-4",children:s.find(e=>{var t;return(null===(t=e.bookedBy)||void 0===t?void 0:t._id)===(null==T?void 0:T._id)})?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Slot Number:"}),(0,a.jsx)(E,{className:"animate-pulse",children:null===(e=s.find(e=>{var t;return(null===(t=e.bookedBy)||void 0===t?void 0:t._id)===(null==T?void 0:T._id)}))||void 0===e?void 0:e.slotNumber})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["P",null===(t=s.find(e=>{var t;return(null===(t=e.bookedBy)||void 0===t?void 0:t._id)===(null==T?void 0:T._id)}))||void 0===t?void 0:t.slotNumber]})]}),(0,a.jsxs)(n.$,{variant:"destructive",className:"w-full hover:bg-red-600 transition-colors",onClick:()=>{var e;let t=null===(e=s.find(e=>{var t;return(null===(t=e.bookedBy)||void 0===t?void 0:t._id)===(null==T?void 0:T._id)}))||void 0===e?void 0:e.slotNumber;t&&Q(t)},children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Release Slot"]})]}):(0,a.jsxs)("div",{className:"text-center p-6 space-y-4",children:[(0,a.jsx)(U.A,{className:"h-12 w-12 text-muted-foreground mx-auto"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:"No active bookings"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Book a parking slot from the available slots below"})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-3xl font-semibold tracking-tight flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-8 w-8"}),"Available Parking Slots"]}),(0,a.jsxs)(E,{variant:"outline",className:"text-sm",children:[s.filter(e=>"available"===e.status).length," ","slots available"]})]}),(0,a.jsx)(_,{className:"h-[600px] rounded-lg border",children:y?(0,a.jsx)("div",{className:"flex items-center justify-center h-full p-12",children:(0,a.jsx)(F.A,{className:"h-12 w-12 animate-spin text-muted-foreground"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4",children:s.map(e=>(0,a.jsxs)(o.Zp,{className:"shadow-lg hover:shadow-xl transition-all duration-300 ".concat("available"===e.status?"hover:border-green-500 hover:scale-105":"hover:scale-102"),children:[(0,a.jsx)(o.aR,{className:"pb-2",children:(0,a.jsx)(o.ZB,{className:"flex items-center justify-between",children:(0,a.jsxs)("span",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-slate-50",children:es(e.status)}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"text-xl font-bold",children:["Slot ",e.slotNumber]}),(0,a.jsx)(E,{variant:"available"===e.status?"default":"secondary",className:"\n                                ".concat("available"===e.status?"bg-green-500/10 text-green-700 hover:bg-green-500/20":"","\n                                ").concat("occupied"===e.status?"bg-blue-500/10 text-blue-700":"","\n                                font-medium\n                              "),children:"occupied"===e.status?"Booked":e.status})]})]})})}),(0,a.jsxs)(o.Wu,{className:"pt-4",children:["available"===e.status&&(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)(n.$,{className:"w-full bg-green-600 hover:bg-green-700 transition-colors",variant:"default",onClick:()=>H(e),children:[(0,a.jsx)(L.A,{className:"mr-2 h-5 w-5"}),"Book Slot"]})}),(0,a.jsxs)(p,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(g,{children:[(0,a.jsxs)(v,{className:"text-2xl flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-6 w-6"}),"Book Parking Slot ",e.slotNumber]}),(0,a.jsx)(b,{children:"Select your preferred date and time for parking"})]}),(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsx)(w,{mode:"single",selected:c,onSelect:e=>u(e),className:"rounded-md border mx-auto",disabled:e=>e<new Date}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(J.A,{className:"h-5 w-5"}),(0,a.jsxs)(W,{value:h,onValueChange:f,children:[(0,a.jsx)(q,{children:(0,a.jsx)(Y,{placeholder:"Start Time"})}),(0,a.jsx)(ee,{children:Array.from({length:24},(e,t)=>"".concat(t.toString().padStart(2,"0"),":00")).map(e=>(0,a.jsx)(et,{value:e,children:e},e))})]}),(0,a.jsxs)(W,{value:N,onValueChange:j,children:[(0,a.jsx)(q,{children:(0,a.jsx)(Y,{placeholder:"Duration"})}),(0,a.jsx)(ee,{children:[1,2,3,4,6,8,12,24].map(e=>(0,a.jsxs)(et,{value:e.toString(),children:[e," ",1===e?"hour":"hours"]},e))})]})]}),(0,a.jsxs)(ei,{className:"bg-blue-50",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)(ed,{children:["Booking will start from ",h," for"," ",N," hour(s)"]})]}),(0,a.jsxs)(n.$,{className:"w-full bg-green-600 hover:bg-green-700",size:"lg",onClick:()=>X(e.slotNumber),children:[(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"}),"Confirm Booking"]})]})]})]})]}),"occupied"===e.status&&e.bookedBy&&(0,a.jsxs)("div",{className:"space-y-3 bg-slate-50 p-4 rounded-lg",children:[e.bookingStart&&e.bookingEnd&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(J.A,{className:"h-4 w-4"}),new Date(e.bookingStart).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}).toLowerCase()," ","-"," ",new Date(e.bookingEnd).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}).toLowerCase()]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Booked by:"}),(0,a.jsx)("span",{className:"font-medium",children:e.bookedBy.username})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Vehicle:"}),(0,a.jsx)(E,{variant:"outline",className:"bg-white",children:e.bookedBy.vehicleNumber})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Mobile:"}),(0,a.jsx)("a",{href:"tel:".concat(e.bookedBy.mobile),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1",children:e.bookedBy.mobile})]})]})]})]},e._id))})})]})]})})}},4085:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>i});var a=s(5155),r=s(2115),o=s(2317),n=s(652),l=s(9602);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(i({variant:r,size:n,className:s})),ref:t,...c})});d.displayName="Button"},5007:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l});var a=s(5155),r=s(2115),o=s(9602);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},9196:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(2115),r=s(9744);let o=()=>{let e=(0,a.useContext)(r.c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},241:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let r=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=l(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9602:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var a=s(3463),r=s(9795);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},9744:(e,t,s)=>{"use strict";s.d(t,{c:()=>n,default:()=>l});var a=s(5155),r=s(2115),o=s(6046);let n=(0,r.createContext)(null);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0),c=(0,o.useRouter)();(0,r.useEffect)(()=>{localStorage.getItem("token")&&l(JSON.parse(localStorage.getItem("user")||"{}")),d(!1)},[]);let u=async(e,t)=>{try{let s="https://iot-server.mukarramah.in";if(!s)throw Error("API URL is not configured");let a=await fetch("".concat(s,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({username:e,password:t})}),r=await a.json();if("success"===r.status)localStorage.setItem("token",r.token),document.cookie="token=".concat(r.token,"; path=/; max-age=86400"),localStorage.setItem("user",JSON.stringify(r.data.user)),l(r.data.user);else throw Error(r.message);c.push("/dashboard")}catch(e){throw Error(e.message)}},m=async(e,t,s,a)=>{try{let r=await fetch("".concat("https://iot-server.mukarramah.in","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({username:e,password:t,mobile:s,vehicleNumber:a})}),o=await r.json();if("success"===o.status)localStorage.setItem("token",o.token),document.cookie="token=".concat(o.token,"; path=/; max-age=86400"),localStorage.setItem("user",JSON.stringify(o.data.user)),l(o.data.user);else throw Error(o.message);c.push("/dashboard")}catch(e){throw Error(e.message)}};return(0,a.jsx)(n.Provider,{value:{user:s,login:u,register:m,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),document.cookie="token=; path=/; max-age=0",l(null),c.push("/login")},isLoading:i},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[582,839,977,493,441,517,358],()=>t(8746)),_N_E=e.O()}]);